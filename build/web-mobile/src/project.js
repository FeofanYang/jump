require=function t(e,i,o){function c(n,r){if(!i[n]){if(!e[n]){var l="function"==typeof require&&require;if(!r&&l)return l(n,!0);if(s)return s(n,!0);var a=new Error("Cannot find module '"+n+"'");throw a.code="MODULE_NOT_FOUND",a}var h=i[n]={exports:{}};e[n][0].call(h.exports,function(t){var i=e[n][1][t];return c(i||t)},h,h.exports,t,e,i,o)}return i[n].exports}for(var s="function"==typeof require&&require,n=0;n<o.length;n++)c(o[n]);return c}({block:[function(t,e,i){"use strict";cc._RF.push(e,"247b9xAaxRBZ6FEKyEBkfoY","block"),cc.Class({extends:cc.Component,start:function(){this.mid=this.node.getChildByName("mid"),this.top=this.node.getChildByName("top"),this.btm=this.node.getChildByName("btm"),this.left=this.node.getChildByName("left"),this.right=this.node.getChildByName("right"),this.isMid=null},test_pos:function(t,e){var i=this.mid.convertToWorldSpaceAR(cc.p(0,0)),o=cc.pSub(t,i),c=cc.pLength(o),s=i;if(1==e){var n=this.top.convertToWorldSpaceAR(cc.p(0,0));o=cc.pSub(t,n),c>(a=cc.pLength(o))&&(c=a,s=n);var r=this.btm.convertToWorldSpaceAR(cc.p(0,0));o=cc.pSub(t,r),c>(a=cc.pLength(o))&&(c=a,s=r)}else{var l=this.left.convertToWorldSpaceAR(cc.p(0,0));o=cc.pSub(t,l);var a=cc.pLength(o);c>a&&(c=a,s=l);var h=this.right.convertToWorldSpaceAR(cc.p(0,0));o=cc.pSub(t,h),c>(a=cc.pLength(o))&&(c=a,s=h)}return this.isMid=s==i,o=cc.pSub(t,s),cc.pLength(o)<=100&&(t.x=s.x,t.y=s.y,!0)},playScoreFn:function(){return this.isMid},play_blockLight:function(){return this.node.getChildByName("mid_light").getComponent(cc.Animation)},play_blockDorp:function(){return this.node.getChildByName("block").getComponent(cc.Animation)}}),cc._RF.pop()},{}],game_scenes:[function(t,e,i){"use strict";cc._RF.push(e,"606deGRG+RMLZ1IH218WKhR","game_scenes"),cc.Class({extends:cc.Component,properties:{player:{default:null,type:cc.Node},block_prefab:{default:[],type:cc.Prefab},block_root:{default:null,type:cc.Node},left_org:cc.p(0,0),camera_root:{default:null,type:cc.Node},checkout:{default:null,type:cc.Node},readyPage:{default:null,type:cc.Node},y_radio:.5560472,scoreLable:{default:null,type:cc.Label},endScoreLable:{default:null,type:cc.Label},start_Audio:{default:null,url:cc.AudioClip},fall_Audio:{default:null,url:cc.AudioClip}},startBtn:function(){this.readyPage.active=!1,this.creat_block(),cc.audioEngine.play(this.start_Audio,!1)},start:function(){this.cur_block=cc.instantiate(this.block_prefab[Math.floor(3*Math.random())]),this.block_root.addChild(this.cur_block),this.cur_block.setPosition(this.block_root.convertToNodeSpaceAR(this.left_org));var t=this.cur_block.getChildByName("mid").convertToWorldSpaceAR(cc.p(0,0));this.player.setPosition(this.camera_root.convertToNodeSpaceAR(t)),this.next_block=this.cur_block,this.playerComp=this.player.getComponent("player"),this.block_zorder=-1,this.block_tag=0},creat_block:function(){this.cur_block=this.next_block,this.next_block=cc.instantiate(this.block_prefab[Math.floor(3*Math.random())]),this.block_root.addChild(this.next_block,this.block_zorder,this.block_tag),this.block_zorder--,this.block_tag++;var t=200+200*Math.random();this.y_distance=t*this.y_radio;var e=this.cur_block.getPosition();e.x+=t*this.playerComp.direction,e.y+=this.y_distance,this.next_block.setPosition(e),this.next_block.getComponent("block").play_blockDorp().playAdditive("block_drop"),this.playerComp.set_next_block(this.next_block.getComponent("block"))},move_map:function(t){var e=cc.moveBy(.5,t,-this.y_distance),i=cc.callFunc(function(){this.creat_block()}.bind(this)),o=cc.sequence(e,i);this.camera_root.runAction(o)},showScore:function(t){this.scoreLable.string=t},checkout_game:function(){cc.audioEngine.play(this.fall_Audio,!1),this.scheduleOnce(function(){this.endScoreLable.string=this.player.getComponent("player").score,this.scoreLable.string=" ",this.checkout.active=!0},.2)},game_again:function(){cc.director.loadScene("game_scenes")}}),cc._RF.pop()},{}],player:[function(t,e,i){"use strict";cc._RF.push(e,"08e34DSRv5B67EAon0Dq8cC","player");var o=t("game_scenes");cc.Class({extends:cc.Component,properties:{initSpeed:150,max_power:600,y_radio:.5560472,game_manager:{type:o,default:null},touchArea:{default:null,type:cc.Node},scorePlusLabel:{default:null,type:cc.Label},scaleAudio:{default:null,url:cc.AudioClip},scoreA_Audio:{default:null,url:cc.AudioClip},score1_Audio:{default:null,url:cc.AudioClip},score2_Audio:{default:null,url:cc.AudioClip},score3_Audio:{default:null,url:cc.AudioClip},score4_Audio:{default:null,url:cc.AudioClip},score5_Audio:{default:null,url:cc.AudioClip},score6_Audio:{default:null,url:cc.AudioClip},score7_Audio:{default:null,url:cc.AudioClip},score8_Audio:{default:null,url:cc.AudioClip}},onLoad:function(){this.next_block=null,this.direction=1},set_next_block:function(t){this.next_block=t},start:function(){this.score=0,this.rotate_node=this.node.getChildByName("rotate"),this.anim_node=this.rotate_node.getChildByName("anim"),this.isPowering=!1,this.speed=0,this.x_distance=0,this.isCombo=0,this.scoreAudioArr=[this.score1_Audio,this.score2_Audio,this.score3_Audio,this.score4_Audio,this.score5_Audio,this.score6_Audio,this.score7_Audio,this.score8_Audio],this.touchArea.on(cc.Node.EventType.TOUCH_START,function(t){this.isPowering=!0,this.speed=this.initSpeed,this.x_distance=0,this.anim_node.stopAllActions(),this.anim_node.runAction(cc.scaleTo(2,1.2,.5)),this.playScale=cc.audioEngine.play(this.scaleAudio,!0)}.bind(this),this),this.touchArea.on(cc.Node.EventType.TOUCH_END,function(t){this.isPowering=!1,this.anim_node.stopAllActions(),this.anim_node.runAction(cc.scaleTo(.5,1,1)),cc.audioEngine.stop(this.playScale),this.player_jump()}.bind(this),this),this.touchArea.on(cc.Node.EventType.TOUCH_CANCEL,function(t){this.isPowering=!1,this.anim_node.stopAllActions(),this.anim_node.runAction(cc.scaleTo(.5,1,1)),cc.audioEngine.stop(this.playScale),this.player_jump()}.bind(this),this)},player_jump:function(){var t=this.x_distance*this.direction,e=this.x_distance*this.y_radio,i=this.node.getPosition();i.x+=t,i.y+=e;var o=this.node.parent.convertToWorldSpaceAR(i);this.rotate_node.runAction(cc.rotateBy(.35,360*this.direction));var c=!1;this.next_block.test_pos(o,this.direction)?i=this.node.parent.convertToNodeSpaceAR(o):c=!0;var s=cc.jumpTo(.35,i,200,1);this.direction=Math.random()<.5?-1:1;var n=cc.callFunc(function(){c?this.game_manager.checkout_game():(this.node.getChildByName("score_plus").getComponent(cc.Animation).playAdditive("scoreAM"),this.next_block.playScoreFn()?(++this.isCombo>8&&(this.isCombo=8),this.next_block.play_blockLight().playAdditive("mid_lightAM"),this.node.parent.getChildByName("score_plus"),cc.audioEngine.play(this.scoreAudioArr[this.isCombo-1],!1),this.score+=2*this.isCombo,this.scorePlusLabel.string="+"+2*this.isCombo):(this.isCombo=0,cc.audioEngine.play(this.scoreA_Audio,!1),this.score++,this.scorePlusLabel.string="+1"),this.game_manager.showScore(this.score.toString()),-1==this.direction?this.game_manager.move_map(580-o.x):this.game_manager.move_map(180-o.x))}.bind(this)),r=cc.sequence(s,n);this.node.runAction(r)},update:function(t){this.isPowering&&(this.speed+=this.max_power*t,this.x_distance+=this.speed*t)}}),cc._RF.pop()},{game_scenes:"game_scenes"}]},{},["block","game_scenes","player"]);